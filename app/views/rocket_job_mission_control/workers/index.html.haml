#workers
  .worker-list
    .list
      .row
        .col-md-6
          %h2
            Worker Processes
        .col-md-6.worker-collection-actions
          - if @workers.present?
            %ol.pull-right
              .btn-group
                - [:stop_all, :pause_all, :resume_all, :destroy_zombies].each do |action|
                  = link_to("#{action.to_s.humanize.capitalize}",
                    rocket_job_mission_control.update_all_workers_path(worker_action: action),
                    method: :patch,
                    data: { confirm: t(:confirm, scope: [:worker, :update_all], action: action.to_s.singularize.humanize.downcase) },
                    class: 'btn btn-default')
              .clearfix
      %table.table.datatable.workers-datatable{ style: "width: 100%" }
        %thead
          %tr
            %th ID
            %th Max/Current Threads
            %th Started
            %th Last Heartbeat
            %th Actions
        %tbody
          - @workers.each do |worker|
            %tr{ class: "card callout #{worker_card_class(worker)}" }
              %td.title
                = worker.name
              %td.max-current-threads
                = "#{worker.max_threads}/#{worker.heartbeat.current_threads.to_i}"
              %td.time
                = "#{RocketJob.seconds_as_duration(Time.now - worker.started_at)} ago"
              %td.heartbeat
                = "#{RocketJob.seconds_as_duration(Time.now - worker.heartbeat.updated_at)} ago"
              %td.actions
                = render partial: 'actions', locals: { worker: worker }
